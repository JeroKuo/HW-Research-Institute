# 常用命令集整理

## 1. 查询当前内存参数ANT1/ANT0
```shell
iwpriv vap4 alg "get_5g_dpd_power_param 00000001"
iwpriv vap4 alg "get_5g_dpd_power_param 00000000"
2. 开关三层LAN口
# 开启三层口（LAN1）
shellconfig InternetGatewayDevice.LANDevice.1.LANEthernetInterfaceConfig.1 set X_HW_L3Enable 1

# 关闭三层口（LAN1）
shellconfig InternetGatewayDevice.LANDevice.1.LANEthernetInterfaceConfig.1 set X_HW_L3Enable 0

# 开启三层口（2.5GE）
shellconfig InternetGatewayDevice.LANDevice.1.LANEthernetInterfaceConfig.2 set X_HW_L3Enable 1

# 关闭三层口（2.5GE）
shellconfig InternetGatewayDevice.LANDevice.1.LANEthernetInterfaceConfig.2 set X_HW_L3Enable 0
3. 新版本打开网页
shellconfig InternetGatewayDevice.X_HW_DataModel.PortalGuideCtrl. set PortalGuideSupport 0
4. 设置网页密码admin@telecom
shellconfig InternetGatewayDevice.UserInterface.X_HW_WebUserInfo.2 set Password Huawei003 Enable 1
5. 网页wifi相关配置操作
# 打开2G WIFI
set wifi radio band b enable 1

# 打开5G WIFI
set wifi radio band a enable 1

# 改5G WIFI名字
set wlan basic laninst 1 wlaninst 5 ssid K251-JZ-5G

# 改2G WIFI名字
set wlan basic laninst 1 wlaninst 1 ssid K251-JZ-2.4G
6. 开特性开关(信令测试)
echo 'feature.name="FT_NOT_INSTALL_SKPOOL" feature.enable="1"' >>/mnt/jffs2/hw_hardinfo_feature
echo 'feature.name="HW_AMP_FEATURE_L2WIFI" feature.enable="0"' >>/mnt/jffs2/hw_hardinfo_feature
reboot
7. 光跑流指令shell->su
echo 'feature.name="FT_FTTR_EDGE_ONT" feature.enable="0"' >> /mnt/jffs2/hw_hardinfo_feature
echo 'feature.name="FT_FTTR_EDGE_PON_CTL" feature.enable="0"' >> /mnt/jffs2/hw_hardinfo_feature
reboot
8. 删除replace_ko
rm -rf /mnt/jffs2/replace_ko
9. 长发包
# 5g tx长发包
iwpriv vap4 alg "al_tx 0"  
wifi_equipment.sh init chip 2  
iwpriv vap4 cali "online_pow 0 1"  
iwpriv vap4 alg "tpc_mode 1"        
wifi_equipment.sh config chip 2 direction tx mode 11ax40plus bw 40 ch 36 mcsax 0 ant 1 tid 0 0       
iwpriv vap4 alg "txmode_user_fix_chain 06:05:04:03:02:04 0001"       
iwpriv vap4 alg "txmode_all_user_fix_mode chain0_fix"      
iwpriv vap4 alg "al_tx 1 10 2 1500 0"   
iwpriv vap4 cali "online_dpd 0 1"     
iwpriv vap4 cali "online_dpd 2 0xc" 

# 2g 长发包
iwpriv vap0 alg "al_tx 0"  
wifi_equipment.sh init chip 1 
iwpriv vap0 cali "online_pow 0 1"  
iwpriv vap0 alg "tpc_mode 0"             
wifi_equipment.sh config chip 1 direction tx mode 11ax20 bw 20 ch 13 mcsax 0 ant 2 tid 0 0    
iwpriv vap0 alg "tpc_code ofdm 0 0"
iwpriv vap0 alg "txmode_user_fix_chain 06:05:04:03:02:04 0010"   
iwpriv vap0 alg "txmode_all_user_fix_mode chain2_fix"    
iwpriv vap0 alg "al_tx 1 10 2 1500 0"   
iwpriv vap0 cali "online_dpd 0 1"     
iwpriv vap0 cali "online_dpd 2 3"
10. 信令下TPC开关
# 2.4G
iwpriv vap0 alg "tpc_mode 1"  # 开
iwpriv vap0 alg "tpc_mode 2"  # 关

# 5G
iwpriv vap4 alg "tpc_mode 1"  # 开
iwpriv vap4 alg "tpc_mode 2"  # 关
11. 查询&配置智能天线指令
iwpriv vap4 alg "get_smartant_mode"
iwpriv vap4 alg "smartant_mode disable/auto/fixed"
iwpriv vap4 alg "smartant_mode auto"
iwpriv vap4 alg "get_smartant_mode"

iwpriv vap4 get_version
12. 切主分集
# 查询5G天线配置
iwpriv vap4 alg "get_fix_ant tx_data"

# 固定天线
iwpriv vap4 alg "smartant_mode fixed"

# 主主---0x9   （ANT0主，ANT1主 ）
iwpriv vap4 alg "smartant_mode fixed"
iwpriv vap4 alg "fix_ant tx_data 0 1"
iwpriv vap4 alg "fix_ant tx_rts 0 1"
iwpriv vap4 alg "fix_ant rx_ctrl 0 1"
iwpriv vap4 alg "fix_ant rx_data 0 1"
iwpriv vap4 alg "fix_ant default 0 1"
iwpriv vap4 alg "get_fix_ant tx_data"

# 分分-0x6   （ANT0分，ANT1分 ）
iwpriv vap4 alg "smartant_mode fixed"
iwpriv vap4 alg "fix_ant tx_data 0 2"
iwpriv vap4 alg "fix_ant tx_rts 0 2"
iwpriv vap4 alg "fix_ant rx_ctrl 0 2"
iwpriv vap4 alg "fix_ant rx_data 0 2"
iwpriv vap4 alg "fix_ant default 0 2"
iwpriv vap4 alg "get_fix_ant tx_data"

# 主分---0x5 （ANT0主，ANT1分 ）
iwpriv vap4 alg "smartant_mode fixed"  
iwpriv vap4 alg "fix_ant tx_data 0 3"
iwpriv vap4 alg "fix_ant tx_rts 0 3"
iwpriv vap4 alg "fix_ant rx_ctrl 0 3"
iwpriv vap4 alg "fix_ant rx_data 0 3"
iwpriv vap4 alg "fix_ant default 0 3"
iwpriv vap4 alg "get_fix_ant tx_data"

# 分主---0xA   （ANT0分，ANT1主 ）
iwpriv vap4 alg "smartant_mode fixed"
iwpriv vap4 alg "fix_ant tx_data 0 4"
iwpriv vap4 alg "fix_ant tx_rts 0 4"
iwpriv vap4 alg "fix_ant rx_ctrl 0 4"
iwpriv vap4 alg "fix_ant rx_data 0 4"
iwpriv vap4 alg "fix_ant default 0 4"
iwpriv vap4 alg "get_fix_ant tx_data"
13. 信令测试切天线
# TX切天线
## 2G
iwpriv vap0 alg "txmode_mgmt_chain 1"
echo "vap0 beacon_chain_switch 2" > /sys/hisys/hipriv
iwpriv vap0 alg "resp_chain_sel 1"
iwpriv vap0 alg "txmode_user_fix_chain 8a:88:2b:00:00:9b 0001"
iwpriv vap0 alg "txmode_all_user_fix_mode chain0_fix"

## 5G
iwpriv vap4 radartool "dfsdebug 2"
iwpriv vap4 alg "txmode_mgmt_chain 1"
echo "vap4 beacon_chain_switch 2" > /sys/hisys/hipriv
iwpriv vap4 alg "resp_chain_sel 1"
iwpriv vap4 alg "txmode_user_fix_chain 8a:88:2b:00:00:9c 0001"
iwpriv vap4 alg "txmode_all_user_fix_mode chain0_fix"

# RX切天线
## 2G
iwpriv vap0 alg "rx_ant 0001"

## 5G
iwpriv vap4 alg "rx_ant 0001"